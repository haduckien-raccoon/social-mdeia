<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Update Password</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
    --pink:#e1306c;
    --orange:#f58529;
    --bg:#fafafa;
    --text:#262626;
    --gray:#8e8e8e;
    --border:#dbdbdb;
    --shadow:0 4px 12px rgba(0,0,0,.08);
}

*{box-sizing:border-box;font-family:'Inter',sans-serif;margin:0;padding:0}
body{display:flex;min-height:100vh;background:var(--bg);color:var(--text)}

/* ========== ICON SIDEBAR ========== */
.icon-sidebar{
    width:60px;
    background:linear-gradient(180deg,var(--orange),var(--pink));
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:20px 0;
}
.logo-circle{
    width:42px;height:42px;border-radius:50%;
    background:#fff;color:var(--pink);
    display:flex;align-items:center;justify-content:center;
    font-weight:700;font-size:20px;margin-bottom:25px;
}
.nav-icons{display:flex;flex-direction:column;gap:24px;flex:1}
.nav-icons a{color:#fff;font-size:20px}
.settings-icon-bottom{
    width:42px;height:42px;border-radius:50%;
    background:var(--pink);color:#fff;
    display:flex;align-items:center;justify-content:center;
}

/* ========== MENU SIDEBAR ========== */
.menu-sidebar{
    width:240px;
    background:#fff;
    border-right:1px solid var(--border);
    padding:30px 20px;
}
.back-link{
    display:flex;align-items:center;
    font-weight:600;text-decoration:none;
    color:var(--text);margin-bottom:25px;
}
.menu-list{list-style:none}
.menu-item{
    padding:10px 12px;border-radius:8px;
    display:flex;align-items:center;
    gap:10px;color:var(--gray);
    cursor:pointer;margin-bottom:10px;
}
.menu-item.active{
    background:#f6f6f6;
    color:var(--text);
    font-weight:600;
}
.menu-item.active i{color:var(--pink)}
.menu-item:hover{background:#f6f6f6}

/* ========== MAIN CONTENT ========== */
.main-content{
    flex:1;
    padding:30px 40px;
    overflow-y:auto;
}
.header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:30px;
}
.page-title{font-size:26px;font-weight:700}
.header-right{display:flex;gap:15px;align-items:center}
.bell{
    width:36px;height:36px;border-radius:50%;
    background:#eee;display:flex;
    align-items:center;justify-content:center;
}
.small-avatar{
    width:36px;height:36px;border-radius:50%;
    object-fit:cover;border:1px solid var(--border);
}

/* ========== FORM ========== */
.form-wrapper{
    max-width:520px;
    margin:0 auto;
}
.avatar-center{
    display:flex;justify-content:center;
    margin-bottom:25px;
}
.avatar-center img{
    width:120px;height:120px;border-radius:50%;
    object-fit:cover;box-shadow:var(--shadow);
}
.form-box{
    background:#fff;
    border:1px solid var(--border);
    border-radius:12px;
    padding:30px;
    box-shadow:var(--shadow);
}
.form-box h3{margin-bottom:10px}
.form-box p{color:var(--gray);font-size:14px;margin-bottom:20px}

.form-group{margin-bottom:18px}
.form-group label{
    display:block;font-weight:500;margin-bottom:6px;
}
.form-group input{
    width:100%;padding:12px 14px;
    border-radius:8px;border:1px solid var(--border);
    font-size:14px;
}
.form-group input:focus{
    border-color:var(--pink);
    outline:none;
}

.form-actions{
    display:flex;gap:12px;margin-top:10px;
}
.btn-submit{
    flex:1;
    background:linear-gradient(135deg,var(--orange),var(--pink));
    border:none;color:#fff;
    padding:12px;border-radius:8px;
    font-weight:600;cursor:pointer;
}
.btn-cancel{
    flex:1;
    text-align:center;
    border:1px solid var(--border);
    padding:12px;border-radius:8px;
    text-decoration:none;color:var(--text);
}

.messages{
    background:#e8f5e9;
    color:#2e7d32;
    padding:10px;
    border-radius:6px;
    margin-bottom:15px;
    font-size:14px;
}
</style>
</head>

<body>

<!-- ICON SIDEBAR -->
<aside class="icon-sidebar">
    <div class="logo-circle">SD</div>
    <div class="nav-icons">
        <a href="/"><i class="fa-solid fa-house"></i></a>
        <a href="#"><i class="fa-regular fa-bell"></i></a>
        <a href="#"><i class="fa-regular fa-user"></i></a>
    </div>
    <div class="settings-icon-bottom">
        <i class="fa-solid fa-gear"></i>
    </div>
</aside>

<!-- MENU SIDEBAR -->
<aside class="menu-sidebar">
    <a href="{% url 'profile' %}" class="back-link"><i class="fa-solid fa-chevron-left"></i> My Profile</a>
    <h2 style="margin-bottom:15px; font-size:18px;">Edit profile</h2>
    <ul class="menu-list">
        <li class="menu-item" onclick="location.href='{% url 'edit_profile' %}'"><i class="fa-solid fa-pen"></i> Edit profile</li>
        <li class="menu-item" onclick="location.href='/notifications'"><i class="fa-regular fa-bell"></i> Notification</li>
        <li class="menu-item" onclick="location.href='{% url 'update_email' %}'"><i class="fa-solid fa-envelope"></i> Update Email</li>
        <li class="menu-item" onclick="location.href='{% url 'update_username' %}'"><i class="fa-solid fa-at"></i> Update Username</li>
        <li class="menu-item active" style="font-weight:bold;"><i class="fa-solid fa-key"></i> Update Password</li>
        <li class="menu-item"><i class="fa-solid fa-gear"></i> Appearance</li>
        <li class="menu-item"><i class="fa-regular fa-circle-question"></i> Settings</li>
    </ul>
</aside>

<!-- MAIN -->
<main class="main-content">

    <div class="header">
        <h1 class="page-title">Update Password</h1>
        <div class="header-right">
            <div class="bell"><i class="fa-regular fa-bell"></i></div>
            <img src="{{ profile.avatar.url }}" class="small-avatar">
        </div>
    </div>

    <div class="form-wrapper">

        <div class="avatar-center">
            <img src="{{ profile.avatar.url }}">
        </div>

        <form class="form-box" method="POST" action="{% url 'update_password' %}">
            {% csrf_token %}

            <h3>Change your password</h3>
            <p>For security, please enter your current password.</p>

            {% if messages %}
                <div class="messages">
                    {% for message in messages %}
                        {{ message }}
                    {% endfor %}
                </div>
            {% endif %}

            <div class="form-group">
                <label>Current password</label>
                <input type="password" name="old_password" required>
            </div>

            <div class="form-group">
                <label>New password</label>
                <input type="password" name="new_password" required>
            </div>

            <div class="form-group">
                <label>Confirm new password</label>
                <input type="password" name="confirm_new_password" required>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-submit">
                    Change Password
                </button>
                <a href="{% url 'profile' %}" class="btn-cancel">
                    Cancel
                </a>
            </div>
        </form>

    </div>
</main>

</body>
<script>
    // You can add JavaScript here if needed
    //so sánh mật khẩu mới và xác nhận mật khẩu mới
    const form = document.querySelector('.form-box');
    form.addEventListener('submit', function(event) {
        const newPassword = form.querySelector('input[name="new_password"]').value;
        const confirmNewPassword = form.querySelector('input[name="confirm_new_password"]').value;
        if (newPassword !== confirmNewPassword) {
            event.preventDefault();
            alert("New password and confirm new password do not match.");
        }
    });
</script>
</html>
